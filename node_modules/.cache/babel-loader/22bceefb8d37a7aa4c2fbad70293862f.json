{"ast":null,"code":"function ___$insertStyle(e) {\n  if (e && window) {\n    const n = document.createElement(\"style\");\n    return n.setAttribute(\"type\", \"text/css\"), n.innerHTML = e, document.head.appendChild(n), e;\n  }\n}\n\nfunction _interopDefault(e) {\n  return e && \"object\" == typeof e && \"default\" in e ? e.default : e;\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: !0\n});\n\nvar ReactDOM = require(\"react-dom\"),\n    ReactDOM__default = _interopDefault(ReactDOM),\n    React = require(\"react\"),\n    React__default = _interopDefault(React);\n\nfunction __awaiter(a, l, c, i) {\n  return new (c = c || Promise)(function (e, n) {\n    function t(e) {\n      try {\n        r(i.next(e));\n      } catch (e) {\n        n(e);\n      }\n    }\n\n    function o(e) {\n      try {\n        r(i.throw(e));\n      } catch (e) {\n        n(e);\n      }\n    }\n\n    function r(n) {\n      n.done ? e(n.value) : new c(function (e) {\n        e(n.value);\n      }).then(t, o);\n    }\n\n    r((i = i.apply(a, l || [])).next());\n  });\n}\n\nfunction __generator(t, o) {\n  var r,\n      a,\n      l,\n      c = {\n    label: 0,\n    sent: function () {\n      if (1 & l[0]) throw l[1];\n      return l[1];\n    },\n    trys: [],\n    ops: []\n  },\n      e = {\n    next: n(0),\n    throw: n(1),\n    return: n(2)\n  };\n  return \"function\" == typeof Symbol && (e[Symbol.iterator] = function () {\n    return this;\n  }), e;\n\n  function n(n) {\n    return function (e) {\n      return function (n) {\n        if (r) throw new TypeError(\"Generator is already executing.\");\n\n        for (; c;) try {\n          if (r = 1, a && (l = 2 & n[0] ? a.return : n[0] ? a.throw || ((l = a.return) && l.call(a), 0) : a.next) && !(l = l.call(a, n[1])).done) return l;\n\n          switch (a = 0, (n = l ? [2 & n[0], l.value] : n)[0]) {\n            case 0:\n            case 1:\n              l = n;\n              break;\n\n            case 4:\n              return c.label++, {\n                value: n[1],\n                done: !1\n              };\n\n            case 5:\n              c.label++, a = n[1], n = [0];\n              continue;\n\n            case 7:\n              n = c.ops.pop(), c.trys.pop();\n              continue;\n\n            default:\n              if (!(l = 0 < (l = c.trys).length && l[l.length - 1]) && (6 === n[0] || 2 === n[0])) {\n                c = 0;\n                continue;\n              }\n\n              if (3 === n[0] && (!l || n[1] > l[0] && n[1] < l[3])) {\n                c.label = n[1];\n                break;\n              }\n\n              if (6 === n[0] && c.label < l[1]) {\n                c.label = l[1], l = n;\n                break;\n              }\n\n              if (l && c.label < l[2]) {\n                c.label = l[2], c.ops.push(n);\n                break;\n              }\n\n              l[2] && c.ops.pop(), c.trys.pop();\n              continue;\n          }\n\n          n = o.call(t, c);\n        } catch (e) {\n          n = [6, e], a = 0;\n        } finally {\n          r = l = 0;\n        }\n\n        if (5 & n[0]) throw n[1];\n        return {\n          value: n[0] ? n[1] : void 0,\n          done: !0\n        };\n      }([n, e]);\n    };\n  }\n}\n\nvar nameGenerator = function () {\n  return \"_\" + Math.random().toString(36).substr(2, 9);\n},\n    mountRootId = \"confirm-box-root\" + nameGenerator(),\n    Portal = function (e) {\n  var e = e.children,\n      n = document.getElementById(mountRootId),\n      t = document.createElement(\"div\");\n  return React.useEffect(function () {\n    return n.appendChild(t), function () {\n      return n.removeChild(t);\n    };\n  }, [t, n]), ReactDOM.createPortal(e, t);\n};\n\n___$insertStyle(\".confirm-box {\\n  z-index: 1000;\\n  position: absolute;\\n  left: 45%;\\n  top: 45%;\\n}\\n.confirm-box__content {\\n  z-index: 300;\\n  background-color: #fff;\\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);\\n  padding: 1em;\\n  border-radius: 5px;\\n  width: 300px;\\n  max-width: 400px;\\n}\\n.confirm-box__overlay {\\n  z-index: -1;\\n  position: fixed;\\n  top: 0;\\n  left: 0;\\n  width: 100vw;\\n  height: 100vh;\\n  background-color: rgba(0, 0, 0, 0.1);\\n}\\n.confirm-box__actions {\\n  display: flex;\\n  padding-top: 1em;\\n  justify-content: flex-end;\\n}\\n.confirm-box__actions > :not(:last-child) {\\n  margin-right: 1em;\\n}\");\n\nvar ConfirmBox = function (e) {\n  function n() {\n    d(!1), l(!0);\n  }\n\n  function t() {\n    d(!1), l(!1);\n  }\n\n  var o,\n      r,\n      a,\n      l = e.resolver,\n      c = e.message,\n      i = e.options,\n      u = React.useState(!0),\n      e = u[0],\n      d = u[1];\n  return e ? React__default.createElement(\"div\", {\n    className: \"confirm-box\"\n  }, (o = (i || {}).classNames, r = \"confirm-box__content \" + ((null == o ? void 0 : o.container) || \"\") + \"\\n    \", a = ((null == o ? void 0 : o.buttons) || \"\") + \" \" + ((null == o ? void 0 : o.confirmButton) || \"\") + \"\\n    \", o = ((null == o ? void 0 : o.buttons) || \"\") + \" \" + ((null == o ? void 0 : o.cancelButton) || \"\"), null != i && i.render ? i.render(c, n, t) : React__default.createElement(\"div\", {\n    className: r\n  }, React__default.createElement(\"span\", null, c), React__default.createElement(\"div\", {\n    className: \"confirm-box__actions\"\n  }, React__default.createElement(\"button\", {\n    onClick: n,\n    role: \"confirmable-button\",\n    className: a\n  }, null !== (a = null == i ? void 0 : i.labels) && void 0 !== a && a.confirmable ? null === (a = null == i ? void 0 : i.labels) || void 0 === a ? void 0 : a.confirmable : \"Yes\"), React__default.createElement(\"button\", {\n    onClick: t,\n    role: \"cancellable-button\",\n    className: o\n  }, null !== (o = null == i ? void 0 : i.labels) && void 0 !== o && o.cancellable ? null === (o = null == i ? void 0 : i.labels) || void 0 === o ? void 0 : o.cancellable : \"No\")))), React__default.createElement(\"div\", {\n    className: \"confirm-box__overlay\",\n    onClick: function () {\n      null != i && i.closeOnOverlayClick && (d(!1), l(!1));\n    }\n  })) : null;\n},\n    confirm = function (t, o) {\n  return __awaiter(void 0, void 0, void 0, function () {\n    var n;\n    return __generator(this, function (e) {\n      switch (e.label) {\n        case 0:\n          return [4, document.getElementById(mountRootId)];\n\n        case 1:\n          return e.sent() ? [3, 4] : [4, document.createElement(\"div\")];\n\n        case 2:\n          return [4, (n = e.sent()).setAttribute(\"id\", mountRootId)];\n\n        case 3:\n          e.sent(), document.body.appendChild(n), e.label = 4;\n\n        case 4:\n          return [2, new Promise(function (e) {\n            e = React__default.createElement(ConfirmBox, {\n              resolver: e,\n              message: t,\n              options: o\n            }), e = React__default.createElement(Portal, null, e);\n            ReactDOM__default.render(e, document.getElementById(mountRootId));\n          })];\n      }\n    });\n  });\n};\n\nexports.confirm = confirm;","map":{"version":3,"sources":["../src/helpers/unique-name.ts","../src/config.ts","../src/portal/index.tsx","../src/confirm/index.tsx","../src/index.ts"],"names":["nameGenerator","Math","random","toString","substr","mountRootId","Portal","_a","children","mount","document","getElementById","el","createElement","useEffect","appendChild","removeChild","createPortal","ConfirmBox","resolver","message","options","_b","isOpen","setIsOpen","useState","onConfirmPopup","onCancelPopup","closeOnOverlayClick","classNames","containerClassNames","container","confirmButtonClassNames","buttons","confirmButton","cancelButtonClassNames","cancelButton","render","React","className","onClick","role","labels","confirmable","cancellable","confirm","rootMount","setAttribute","body","Promise","resolve","ConfirmBoxEl","PortalEl","ReactDOM"],"mappings":"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","sourcesContent":["export const nameGenerator = (): string => {\n  return '_' + Math.random().toString(36).substr(2, 9);\n};\n","import { nameGenerator } from './helpers/unique-name';\n\nexport const mountRootId = `confirm-box-root${nameGenerator()}`;\n","import React, { useEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport { mountRootId } from '../config';\n\ntype Props = {\n  children: Element;\n};\n\nexport const Portal: React.FC<Props> = ({ children }: Props) => {\n  const mount = document.getElementById(mountRootId) as HTMLElement;\n  const el = document.createElement('div');\n\n  useEffect((): any => {\n    mount.appendChild(el);\n    return () => mount.removeChild(el);\n  }, [el, mount]);\n\n  return createPortal(children, el);\n};\n","import React, { useState } from 'react';\nimport './styles.scss';\nimport { Options } from '../types';\n\ntype Props = {\n  message: string;\n  resolver: (decision: boolean) => void;\n  options?: Options;\n};\n\nconst ConfirmBox: React.FC<Props> = ({ resolver, message, options }: Props) => {\n  const [isOpen, setIsOpen] = useState(true);\n\n  const onConfirmPopup = () => {\n    setIsOpen(false);\n    resolver(true);\n  };\n\n  const onCancelPopup = () => {\n    setIsOpen(false);\n    resolver(false);\n  };\n\n  const onOverlay = () => {\n    if (!options?.closeOnOverlayClick) return;\n    setIsOpen(false);\n    resolver(false);\n  };\n\n  const render = () => {\n    const { classNames } = options || {};\n\n    const containerClassNames = `confirm-box__content ${classNames?.container || ''}\n    `;\n    const confirmButtonClassNames = `${classNames?.buttons || ''} ${\n      classNames?.confirmButton || ''\n    }\n    `;\n    const cancelButtonClassNames = `${classNames?.buttons || ''} ${\n      classNames?.cancelButton || ''\n    }`;\n\n    if (!options?.render) {\n      return (\n        <div className={containerClassNames}>\n          <span>{message}</span>\n          <div className=\"confirm-box__actions\">\n            <button\n              onClick={onConfirmPopup}\n              role=\"confirmable-button\"\n              className={confirmButtonClassNames}\n            >\n              {options?.labels?.confirmable ? options?.labels?.confirmable : 'Yes'}\n            </button>\n\n            <button\n              onClick={onCancelPopup}\n              role=\"cancellable-button\"\n              className={cancelButtonClassNames}\n            >\n              {options?.labels?.cancellable ? options?.labels?.cancellable : 'No'}\n            </button>\n          </div>\n        </div>\n      );\n    }\n\n    return options.render(message, onConfirmPopup, onCancelPopup);\n  };\n\n  return isOpen ? (\n    <div className=\"confirm-box\">\n      {render()}\n      <div className=\"confirm-box__overlay\" onClick={onOverlay} />\n    </div>\n  ) : null;\n};\n\nexport default ConfirmBox;\n","import ReactDOM from 'react-dom';\n\nimport { Portal } from './portal';\nimport ConfirmBox from './confirm';\nimport React from 'react';\nimport { mountRootId } from './config';\nimport { Options } from './types';\n\nexport const confirm = async (message: string, options?: Options): Promise<any> => {\n  const mount = await document.getElementById(mountRootId);\n  if (!mount) {\n    const rootMount = await document.createElement('div');\n    await rootMount.setAttribute('id', mountRootId);\n    document.body.appendChild(rootMount);\n  }\n\n  return new Promise((resolve) => {\n    const ConfirmBoxEl = React.createElement(ConfirmBox, {\n      resolver: resolve,\n      message,\n      options,\n    });\n    const PortalEl = React.createElement(Portal, null, ConfirmBoxEl);\n    ReactDOM.render(PortalEl, document.getElementById(mountRootId));\n  });\n};\n"]},"metadata":{},"sourceType":"script"}