{"ast":null,"code":"var _jsxFileName = \"/home/asus/dapify/src/templates/view/Home/homeAudio.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { getUserProfileById, fetchUser } from \"../../../Redux/actions/auth-actions\";\nimport { getUserMediaMusic } from \"../../../Redux/actions/media-actions\";\nimport { useSelector, connect } from \"react-redux\";\nimport MusicComponent from '../../components/musicComponent';\nimport { Button, CircularProgress } from '@material-ui/core';\nimport { getUserSubscriptionExpired } from \"../../../Redux/actions/subscriber-actions\";\nimport ExpiryDate from \"../../components/subscriptionExpiryDate\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction HomeAudio(props) {\n  _s();\n\n  const [isLoader, setLoader] = useState(true);\n  const {\n    userDetailsById,\n    authuser\n  } = useSelector(state => state.authReducer);\n  const {\n    userMusic,\n    music_content_like,\n    music_content_bookmark,\n    MusicTotal,\n    loading\n  } = useSelector(state => state.mediaReducer);\n  const [profileId, setProfileId] = useState();\n  const [initialLimit, setInitialLimit] = useState(6);\n  const [dataLimit, setDataLimit] = useState(6);\n  const {\n    subscribeExpired\n  } = useSelector(state => state.subscriberReducer);\n  const [expiredDate, setExpiredDate] = useState('');\n  const [viewPermission, setViewPermission] = useState(false);\n  useEffect(() => {\n    async function fetchdata() {\n      console.log('propsprofileid', props);\n\n      if (props.userProfileId) {\n        const profileid = Buffer.from(props.userProfileId, 'base64').toString('ascii');\n        setProfileId(profileid);\n        await props.getUserProfileById(profileid);\n        await props.getUserMediaMusic(profileid, dataLimit);\n        const data = {\n          user_id: authuser.uid,\n          subscriberId: profileid\n        };\n        await props.getUserSubscriptionExpired(data);\n        setLoader(false);\n\n        if (authuser.uid === profileId) {\n          setViewPermission(true);\n        }\n      } else {\n        await props.getUserProfileById(authuser.uid);\n        await props.getUserMediaMusic(authuser.uid, dataLimit);\n        setLoader(false);\n      }\n    }\n\n    fetchdata();\n  }, [authuser.uid, music_content_like, music_content_bookmark, dataLimit, isLoader]);\n  useEffect(() => {\n    if (authuser.uid === profileId) {\n      setViewPermission(true);\n    } else {\n      if (subscribeExpired.subscribe_type === 'one_time_support') {\n        setViewPermission(true);\n      } else {\n        if (subscribeExpired.date) {\n          var exp_date = ExpiryDate(subscribeExpired.date);\n\n          if (exp_date !== '') {\n            setExpiredDate(exp_date);\n            setViewPermission(true);\n          } else {\n            setViewPermission(false);\n          }\n\n          console.log('exp_date', exp_date);\n        }\n      }\n    }\n  }, [profileId, subscribeExpired]);\n\n  const handleNext = () => {\n    var new_limit = dataLimit + initialLimit;\n    setDataLimit(new_limit);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"right-post-items\",\n    children: [userMusic.length > 0 ? userMusic.map((mediaContent, indx) => mediaContent.media_type === \"audio\" && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `post-item ${props.userProfileId ? mediaContent.public === 'true' ? 'media-unlock' : viewPermission === true ? 'media-unlock' : '' : 'media-unlock'}`,\n      children: /*#__PURE__*/_jsxDEV(MusicComponent, {\n        type: \"home\",\n        mediaId: mediaContent.id,\n        uid: props.userProfileId ? props.userProfileId : authuser.uid,\n        mediaData: mediaContent\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 29\n      }, this)\n    }, mediaContent.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 25\n    }, this)) : '', userMusic && (userMusic.length < MusicTotal ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"LoadMore-btn\",\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        className: \"btn\",\n        type: \"button\",\n        onClick: handleNext,\n        children: \"Load More...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 29\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 25\n    }, this) : '')]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 13\n  }, this);\n}\n\n_s(HomeAudio, \"jn+36qhgZQjbKPalG0v/w7yxbec=\", false, function () {\n  return [useSelector, useSelector, useSelector];\n});\n\n_c = HomeAudio;\n\nconst mapStateToProps = state => {\n  return {\n    userDetailsById: state.authReducer.userDetailsById,\n    authuser: state.authReducer.authuser,\n    userMusic: state.mediaReducer.userMusic,\n    music_content_like: state.mediaReducer.music_content_like,\n    music_content_bookmark: state.mediaReducer.music_content_bookmark,\n    MusicTotal: state.mediaReducer.MusicTotal,\n    subscribeExpired: state.subscriberReducer.subscribeExpired\n  };\n};\n\nconst actionCreators = {\n  getUserProfileById,\n  fetchUser,\n  getUserMediaMusic,\n  getUserSubscriptionExpired\n};\nexport default connect(mapStateToProps, actionCreators)(HomeAudio);\n\nvar _c;\n\n$RefreshReg$(_c, \"HomeAudio\");","map":{"version":3,"names":["React","useState","useEffect","getUserProfileById","fetchUser","getUserMediaMusic","useSelector","connect","MusicComponent","Button","CircularProgress","getUserSubscriptionExpired","ExpiryDate","HomeAudio","props","isLoader","setLoader","userDetailsById","authuser","state","authReducer","userMusic","music_content_like","music_content_bookmark","MusicTotal","loading","mediaReducer","profileId","setProfileId","initialLimit","setInitialLimit","dataLimit","setDataLimit","subscribeExpired","subscriberReducer","expiredDate","setExpiredDate","viewPermission","setViewPermission","fetchdata","console","log","userProfileId","profileid","Buffer","from","toString","data","user_id","uid","subscriberId","subscribe_type","date","exp_date","handleNext","new_limit","length","map","mediaContent","indx","media_type","public","id","mapStateToProps","actionCreators"],"sources":["/home/asus/dapify/src/templates/view/Home/homeAudio.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { getUserProfileById, fetchUser } from \"../../../Redux/actions/auth-actions\";\nimport { getUserMediaMusic } from \"../../../Redux/actions/media-actions\";\nimport { useSelector, connect } from \"react-redux\";\nimport MusicComponent from '../../components/musicComponent';\nimport { Button, CircularProgress } from '@material-ui/core'\nimport { getUserSubscriptionExpired } from \"../../../Redux/actions/subscriber-actions\";\nimport ExpiryDate from \"../../components/subscriptionExpiryDate\";\n\nfunction HomeAudio(props) {\n\n    const [isLoader, setLoader] = useState(true);\n    const { userDetailsById, authuser } = useSelector((state) => state.authReducer);\n    const { userMusic,music_content_like,music_content_bookmark,MusicTotal,loading } = useSelector((state) => state.mediaReducer);\n    const [profileId, setProfileId] = useState();\n    const [initialLimit, setInitialLimit] = useState(6);\n    const [dataLimit, setDataLimit] = useState(6);\n    const { subscribeExpired } = useSelector((state) => state.subscriberReducer);\n    const [expiredDate, setExpiredDate] = useState('');\n    const [viewPermission, setViewPermission] = useState(false);\n   \n    useEffect(() => {\n        async function fetchdata() {\n           console.log('propsprofileid',props);\n           \n            if (props.userProfileId) {\n                const profileid = Buffer.from(props.userProfileId, 'base64').toString('ascii');\n                setProfileId(profileid);\n                await props.getUserProfileById(profileid);\n                await props.getUserMediaMusic(profileid,dataLimit);\n                const data ={\n                    user_id:authuser.uid,\n                    subscriberId:profileid,\n                }\n                await props.getUserSubscriptionExpired(data);\n                setLoader(false);\n                if(authuser.uid === profileId){\n                    setViewPermission(true);\n                }\n            }\n            else {\n                await props.getUserProfileById(authuser.uid);\n                await props.getUserMediaMusic(authuser.uid,dataLimit);\n                setLoader(false);\n            }\n        }\n        fetchdata();\n      \n    }, [authuser.uid,music_content_like,music_content_bookmark,dataLimit,isLoader]);\n\n    useEffect(() => {\n        if(authuser.uid === profileId){\n            setViewPermission(true);\n        }else{\n            if(subscribeExpired.subscribe_type === 'one_time_support'){\n                setViewPermission(true);\n            }else{\n                if(subscribeExpired.date){\n                    var exp_date = ExpiryDate(subscribeExpired.date);\n                    if(exp_date !== ''){\n                        \n                        setExpiredDate(exp_date);\n                        setViewPermission(true);\n                        \n                    }else{\n                        setViewPermission(false);\n                    }\n                    console.log('exp_date',exp_date);\n                }\n            }\n        }\n\n    },[profileId,subscribeExpired]);\n\n    const handleNext = () =>  {\n       var new_limit = dataLimit + initialLimit;\n       setDataLimit(new_limit);\n    }; \n\n    return (\n             \n            <div className='right-post-items'>\n                {userMusic.length > 0 ? (\n                    userMusic.map((mediaContent,indx) => (\n                        mediaContent.media_type === \"audio\" && (\n                        <div key={mediaContent.id} className={`post-item ${props.userProfileId ? mediaContent.public === 'true' ? 'media-unlock' : viewPermission === true ? 'media-unlock' : '' : 'media-unlock'}`}>\n                            <MusicComponent type=\"home\" mediaId={mediaContent.id} uid={props.userProfileId ? props.userProfileId : authuser.uid} mediaData={mediaContent}/>\n                        </div>\n                    )\n                    ))) : ''} \n                {\n                    userMusic && (\n                        userMusic.length < MusicTotal ?\n                        <div className='LoadMore-btn'>\n                            <Button className=\"btn\" type=\"button\" onClick={handleNext}>\n                                Load More...\n                                {/* <CircularProgress /> */}\n                            </Button>\n                        </div> : '' )\n                }\n            </div>\n\n    );\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        userDetailsById: state.authReducer.userDetailsById,\n        authuser: state.authReducer.authuser,\n        userMusic: state.mediaReducer.userMusic,\n        music_content_like: state.mediaReducer.music_content_like,\n        music_content_bookmark: state.mediaReducer.music_content_bookmark,\n        MusicTotal: state.mediaReducer.MusicTotal,  \n        subscribeExpired: state.subscriberReducer.subscribeExpired,\n    }\n}\n\nconst actionCreators = { getUserProfileById, fetchUser, getUserMediaMusic,getUserSubscriptionExpired };\nexport default connect(mapStateToProps, actionCreators)(HomeAudio);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}