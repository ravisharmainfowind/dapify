{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport styles from './styles.module.css'\n\nconst InstagramFeed = props => {\n\n  const { token, counter } = props;\n  const placeholder = useRef();\n  const [data, setData] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isError, setIsError] = useState(false);\n  const [showImage, setShowImage] = useState(false);\n\n  const type = showImage ? 'hidePlaceholder' : 'placeholder';\n\n  let url = `https://graph.instagram.com/me/media?fields=media_count,media_type,permalink,media_url,caption&&access_token=${token}`;\n\n  useEffect(() => {\n    const fetchData = async () => {\n      setIsLoading(true);\n      fetch(url)\n        .then(response => response.json())\n        .then(result => {\n          setData(result.data)\n          console.log('JavaScript version is here https://codecanyon.net/item/instaget-javascript-library-for-instagram/26300578');\n        })\n        .catch((error) => setIsError(true));\n      setIsLoading(false);\n    };\n\n    fetchData();\n\n    const callback = (entries) => {\n      entries.forEach((entry) => {\n        if (entry.isIntersecting) {\n          setShowImage(true);\n        }\n      });\n    };\n\n    const options = {\n      threshold: 1.0\n    };\n\n    const observer = new IntersectionObserver(callback, options);\n    observer.observe(placeholder.current);\n\n    // intersection observer set-up\n    return () => observer.disconnect();\n\n  }, [url]);\n\n\n  return (\n    <div>\n      \n      {isLoading ? (<div> Loading... </div>)\n        : isError ? (\n          <div>\n            <p className=\"errorMessage\"> the access token is not valid</p>\n          </div>)\n          : (\n            <div className={styles.instagramItems} ref={placeholder}>\n              {showImage && (\n                data.slice(0, counter).map((item, index) => (\n                  <div key={index} className={styles.instagramItem}>\n                    <a\n                      key={index}\n                      href={item.permalink}\n                      className=\"ig-instagram-link\"\n                      target=\"_blank\"\n                      rel=\"noreferrer\"\n                    >\n                      {(item.media_type === 'IMAGE' || item.media_type === 'CAROUSEL_ALBUM') ?\n                       <img\n                          className={styles.instagramImg}\n                          key={index}\n                          src={item.media_url}\n                          alt=\"description\"\n                        /> : <video className={styles.instagramImg} key={index} src={item.media_url} alt={item.caption} type=\"video/mp4\"></video>\n                      }\n\n\n                      <div className={styles.instagramIcon}>\n                        <div className=\"instagram-count-item\">\n                          <span className=\"icon\">\n                            {/*change your svg icon*/}\n\n                            <svg height=\"18\" viewBox=\"0 0 512 512\" width=\"18\">\n                              <path\n                                fill=\"currentColor\"\n                                d=\"m256 386c-71.683 0-130-58.317-130-130 7.14-172.463 252.886-172.413 260 .001 0 71.682-58.317 129.999-130 129.999zm0-220c-49.626 0-90 40.374-90 90 4.944 119.397 175.074 119.362 180-.001 0-49.625-40.374-89.999-90-89.999zm236 346h-472c-11.046 0-20-8.954-20-20v-472c0-11.046 8.954-20 20-20h472c11.046 0 20 8.954 20 20v472c0 11.046-8.954 20-20 20zm-452-40h432v-432h-432zm372-392c-11.046 0-20 8.954-20 20 0 11.046 8.954 20 20 20 11.046 0 20-8.954 20-20 0-11.046-8.954-20-20-20z\"\n                              />\n                            </svg>\n                          </span>\n                        </div>\n                      </div>\n                    </a>\n                  </div>\n                )))}\n            </div>)}\n    </div>\n  );\n}\nexport default InstagramFeed;\n"],"names":["InstagramFeed","props","token","counter","placeholder","useRef","useState","data","setData","isLoading","setIsLoading","isError","setIsError","showImage","setShowImage","url","useEffect","fetchData","fetch","then","response","json","result","console","log","error","callback","entries","forEach","entry","isIntersecting","options","threshold","observer","IntersectionObserver","observe","current","disconnect","React","styles","instagramItems","slice","map","item","index","instagramItem","permalink","media_type","instagramImg","media_url","caption","instagramIcon"],"mappings":"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"}